{"ast":null,"code":"var _jsxFileName = \"/Users/SBJ/project/React/banking_project/src/pages/AuthResultPage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport queryString from \"query-string\";\nimport Header from \"../components/common/Header\";\nimport axios from \"axios\";\nimport qs from \"qs\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst AuthResultPage = () => {\n  _s();\n\n  const {\n    search\n  } = useLocation();\n  const {\n    code\n  } = queryString.parse(search);\n  const [accessToken, setaccessToken] = useState(\"토큰 받아오기 전 데이터\");\n  useEffect(() => {\n    getAccessToken();\n  }, []);\n\n  const getAccessToken = () => {\n    const sendData = qs.stringify({\n      code: code,\n      client_id: \"10866f6e-c280-41e3-bcc0-c3df9cddbcca\",\n      client_secret: \"cd76aef5-bb1e-4cb5-8acb-412577f8c714\",\n      redirect_uri: \"http://localhost:3000/authResult\",\n      grant_type: \"authorization_code\"\n    });\n    const option = {\n      method: \"POST\",\n      url: \"/oauth/2.0/token\",\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      },\n      data: sendData\n    }; //#homework : 해당 코드가 동작하게 변경해주세요 ! hint : proxy, json serialization on axios\n\n    axios(option).then(response => {\n      console.log(response.data);\n      setaccessToken(response.data.access_token);\n      localStorage.setItem(\"accessToken\", response.data.access_token);\n      localStorage.setItem(\"userSeqNum\", response.data.user_seq_no);\n      window.opener.location.href = \"/list\";\n      window.close();\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      title: \"사용자 발급 토큰 확인\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"\\uC0AC\\uC6A9\\uC790\\uAC00 \\uBC1C\\uAE09\\uBC1B\\uC740 \\uC0AC\\uC6A9\\uC790 \\uCF54\\uB4DC\\uB294\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: code\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"\\uC0AC\\uC6A9\\uC790\\uC758 \\uD1A0\\uD070\\uC740?\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: accessToken\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(AuthResultPage, \"MGyB2B6dbQIpJnpH/JsvomtpOck=\", false, function () {\n  return [useLocation];\n});\n\n_c = AuthResultPage;\nexport default AuthResultPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthResultPage\");","map":{"version":3,"sources":["/Users/SBJ/project/React/banking_project/src/pages/AuthResultPage.js"],"names":["React","useState","useEffect","useLocation","queryString","Header","axios","qs","AuthResultPage","search","code","parse","accessToken","setaccessToken","getAccessToken","sendData","stringify","client_id","client_secret","redirect_uri","grant_type","option","method","url","headers","data","then","response","console","log","access_token","localStorage","setItem","user_seq_no","window","opener","location","href","close"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,OAAOC,WAAP,MAAwB,cAAxB;AACA,OAAOC,MAAP,MAAmB,6BAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,EAAP,MAAe,IAAf;;;;AAEA,MAAMC,cAAc,GAAG,MAAM;AAAA;;AAC3B,QAAM;AAAEC,IAAAA;AAAF,MAAaN,WAAW,EAA9B;AACA,QAAM;AAAEO,IAAAA;AAAF,MAAWN,WAAW,CAACO,KAAZ,CAAkBF,MAAlB,CAAjB;AACA,QAAM,CAACG,WAAD,EAAcC,cAAd,IAAgCZ,QAAQ,CAAC,eAAD,CAA9C;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACdY,IAAAA,cAAc;AACf,GAFQ,EAEN,EAFM,CAAT;;AAIA,QAAMA,cAAc,GAAG,MAAM;AAC3B,UAAMC,QAAQ,GAAGR,EAAE,CAACS,SAAH,CAAa;AAC5BN,MAAAA,IAAI,EAAEA,IADsB;AAE5BO,MAAAA,SAAS,EAAE,sCAFiB;AAG5BC,MAAAA,aAAa,EAAE,sCAHa;AAI5BC,MAAAA,YAAY,EAAE,kCAJc;AAK5BC,MAAAA,UAAU,EAAE;AALgB,KAAb,CAAjB;AAQA,UAAMC,MAAM,GAAG;AACbC,MAAAA,MAAM,EAAE,MADK;AAEbC,MAAAA,GAAG,EAAE,kBAFQ;AAGbC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT,OAHI;AAMbC,MAAAA,IAAI,EAAEV;AANO,KAAf,CAT2B,CAiB3B;;AACAT,IAAAA,KAAK,CAACe,MAAD,CAAL,CAAcK,IAAd,CAAmBC,QAAQ,IAAI;AAC7BC,MAAAA,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACF,IAArB;AACAZ,MAAAA,cAAc,CAACc,QAAQ,CAACF,IAAT,CAAcK,YAAf,CAAd;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,aAArB,EAAoCL,QAAQ,CAACF,IAAT,CAAcK,YAAlD;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,YAArB,EAAmCL,QAAQ,CAACF,IAAT,CAAcQ,WAAjD;AACAC,MAAAA,MAAM,CAACC,MAAP,CAAcC,QAAd,CAAuBC,IAAvB,GAA8B,OAA9B;AACAH,MAAAA,MAAM,CAACI,KAAP;AACD,KAPD;AAQD,GA1BD;;AA4BA,sBACE;AAAA,4BACE,QAAC,MAAD;AAAQ,MAAA,KAAK,EAAE;AAAf;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF,eAGE;AAAA,gBAAI5B;AAAJ;AAAA;AAAA;AAAA;AAAA,YAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAJF,eAKE;AAAA,gBAAIE;AAAJ;AAAA;AAAA;AAAA;AAAA,YALF;AAAA,kBADF;AASD,CA9CD;;GAAMJ,c;UACeL,W;;;KADfK,c;AAgDN,eAAeA,cAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport queryString from \"query-string\";\nimport Header from \"../components/common/Header\";\nimport axios from \"axios\";\nimport qs from \"qs\";\n\nconst AuthResultPage = () => {\n  const { search } = useLocation();\n  const { code } = queryString.parse(search);\n  const [accessToken, setaccessToken] = useState(\"토큰 받아오기 전 데이터\");\n\n  useEffect(() => {\n    getAccessToken();\n  }, []);\n\n  const getAccessToken = () => {\n    const sendData = qs.stringify({\n      code: code,\n      client_id: \"10866f6e-c280-41e3-bcc0-c3df9cddbcca\",\n      client_secret: \"cd76aef5-bb1e-4cb5-8acb-412577f8c714\",\n      redirect_uri: \"http://localhost:3000/authResult\",\n      grant_type: \"authorization_code\",\n    });\n\n    const option = {\n      method: \"POST\",\n      url: \"/oauth/2.0/token\",\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n      },\n      data: sendData,\n    };\n    //#homework : 해당 코드가 동작하게 변경해주세요 ! hint : proxy, json serialization on axios\n    axios(option).then(response => {\n      console.log(response.data);\n      setaccessToken(response.data.access_token);\n      localStorage.setItem(\"accessToken\", response.data.access_token);\n      localStorage.setItem(\"userSeqNum\", response.data.user_seq_no);\n      window.opener.location.href = \"/list\";\n      window.close();\n    });\n  };\n\n  return (\n    <>\n      <Header title={\"사용자 발급 토큰 확인\"}></Header>\n      <p>사용자가 발급받은 사용자 코드는</p>\n      <p>{code}</p>\n      <p>사용자의 토큰은?</p>\n      <p>{accessToken}</p>\n    </>\n  );\n};\n\nexport default AuthResultPage;\n"]},"metadata":{},"sourceType":"module"}